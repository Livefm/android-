# 关于简易安卓端远控木马的编写

## 一、收获

①会想绝不等价于会做

​	当时任务布置下来，除了服务器与客户端通信那一块有点迷，其他的功能模块可谓是思路清晰。当时的想法：无非是调用各种封装好的函数，况且网上各种功能模块都直接有别人写好的demo，可以直接“敏捷开发”，将别人写好的demo拼装，然后通过简单的调试即可做完。

​	可是，后来真正动手做的时候，我发现压根不是那样，别人的代码移植过来会有各种奇葩的bug，由于本人java水平停留在学校面向考试的那种水平，所以很多bug直接改到吐血。当然，我这里绝无诋毁java移植性差的意思。哈哈哈

②让我看清自己是有多懒

​	任务布置时间是上上个星期五，结果到这个周五才完成了部分功能模块。按理说，就算是没有接触过android开发，java语言用的不熟，这个时间周期应该也可以做的差不多了。但是我却拖沓了这么久，我自己总结了两个原因：①菜是原罪 ②说得好听叫不懂得时间管理，但是说白了就是懒。在家就是忍不住想躺着休息，哪怕是无聊到刷b站也不想动手敲代码。

③了解了java的socket通信的一些基本操作

​	刚开始处理服务端和客户端通信的时候，第一想到的是通过第三方邮箱来实现。然后动手去做了，查了资料，java官方有一个邮件类包，叫jmail，在这上面花费了很长时间，虽然也确实实现了发邮件的功能，但是很容易出bug。在这个模块上耗了将近一天的时间，最终这个方案被弃用了。

![image-20200807152218405](C:\Users\L1vefm\AppData\Roaming\Typora\typora-user-images\image-20200807152218405.png)

​	然后就开始想着用较为常规的socket通信，虽然平时工作中抓包分析的工作做了许多，但是自己基本没有真正动手去做相关的网络编程。于是开始搜索别人的demo “android 服务器 客户端 通信”，资料还是挺多的，但是由于不是官方文档，所以别人写的东西很多地方就不会写的十分详细，甚至会缺失部分功能代码。所以也耗费了很多时间。

​	之所以照着别人的代码写都会耗费这么久时间，我觉得最重要的原因就是：上来就直接把别人的代码对着敲，对每一个函数的具体功能都只了解了个大致，所以出bug后，会不知道为什么会这样。在忙活一天没啥依旧头大后，我试着静下来，去仔细阅读别人的介绍文档，而不仅仅是代码。对于socket使用的整个流程和大致原理认真阅读思考。

![image-20200807153032608](C:\Users\L1vefm\AppData\Roaming\Typora\typora-user-images\image-20200807153032608.png)

## 二、代码

### 2.1、服务端代码

![image-20200817143615447](C:\Users\L1vefm\AppData\Roaming\Typora\typora-user-images\image-20200817143615447.png)

### 2.2、客户端代码

①运行自动删除图标

#### ![image-20200817143929206](C:\Users\L1vefm\AppData\Roaming\Typora\typora-user-images\image-20200817143929206.png)

②接受服务端指令

![image-20200817144001552](C:\Users\L1vefm\AppData\Roaming\Typora\typora-user-images\image-20200817144001552.png)

③获取目标设备基本信息

![image-20200817144032622](C:\Users\L1vefm\AppData\Roaming\Typora\typora-user-images\image-20200817144032622.png)

④获取通讯录信息

![image-20200817144058366](C:\Users\L1vefm\AppData\Roaming\Typora\typora-user-images\image-20200817144058366.png)

⑤获取设备短信

![image-20200817144128336](C:\Users\L1vefm\AppData\Roaming\Typora\typora-user-images\image-20200817144128336.png)